/* would like to ignore ./src/pages/og-image/[slug].png.ts */
@import "tailwindcss";
/* config for tailwindcss-typography plugin */
@config "../../tailwind.config.ts";

/* use a selector-based strategy for dark mode */
@variant dark (&:where([data-theme="dark"], [data-theme="dark"] *));

/* you could refactor below to use light-dark(), depending on your target audience */
@theme {
	--color-global-bg: oklch(98.48% 0 0);
	--color-global-text: oklch(26.99% 0.0096 235.05);
	--color-link: oklch(55.44% 0.0431 185.69);
	--color-accent: oklch(55.27% 0.195 19.06);
	--color-accent-2: oklch(18.15% 0 0);
	--color-quote: oklch(55.27% 0.195 19.06);
}

@layer base {
	html {
		color-scheme: light dark;
		accent-color: var(--color-accent);
		scrollbar-gutter: stable;
		@apply scroll-smooth;

		&[data-theme="light"] {
			color-scheme: light;
		}

		&[data-theme="dark"] {
			color-scheme: dark;
			--color-global-bg: oklch(23.64% 0.0045 248);
			--color-global-text: oklch(83.54% 0 264);
			--color-link: oklch(70.44% 0.1133 349);
			--color-accent: oklch(70.91% 0.1415 163.7);
			--color-accent-2: oklch(94.66% 0 0);
			--color-quote: oklch(94.8% 0.106 136.49);
		}
	}

	html body {
		@apply mx-auto flex min-h-screen flex-col bg-global-bg pt-16 font-mono text-sm font-normal text-global-text antialiased;
		@apply max-w-4xl px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16;
	}

	:target {
		scroll-margin-block: 5ex;
	}

	@view-transition {
		navigation: auto;
	}

	/* Astro image responsive styles, modified from -> https://docs.astro.build/en/guides/images/#responsive-image-styles */
	:where([data-astro-image]) {
		object-fit: var(--fit);
		object-position: var(--pos);
	}
	[data-astro-image="full-width"] {
		width: 100%;
	}
	[data-astro-image="constrained"] {
		max-width: 100%;
	}
}

@utility prose {
	--tw-prose-body: var(--color-global-text);
	--tw-prose-bold: var(--color-global-text);
	--tw-prose-bullets: var(--color-global-text);
	--tw-prose-code: var(--color-global-text);
	--tw-prose-headings: var(--color-accent-2);
	--tw-prose-hr: 0.5px dashed #666;
	--tw-prose-links: var(--color-global-text);
	--tw-prose-quotes: var(--color-quote);
	--tw-prose-th-borders: #666;
}

/* Mobile hamburger menu styles */
@media (max-width: 640px) {
	.hamburger {
		display: flex;
		flex-direction: column;
		justify-content: space-around;
		width: 2rem;
		height: 1.5rem;
		background: transparent;
		border: none;
		cursor: pointer;
		padding: 0;
		z-index: 10;
	}

	.hamburger .line {
		width: 2rem;
		height: 0.2rem;
		background: var(--color-global-text);
		border-radius: 10px;
		transition: all 0.3s linear;
		position: relative;
		transform-origin: 1px;
	}

	.hamburger .line:first-child {
		transform: rotate(0);
	}

	.hamburger .line:nth-child(2) {
		opacity: 1;
		transform: translateX(0);
	}

	.hamburger .line:nth-child(3) {
		transform: rotate(0);
	}

	/* Hamburger animation when expanded */
	.hamburger.expanded .line:first-child {
		transform: rotate(45deg);
	}

	.hamburger.expanded .line:nth-child(2) {
		opacity: 0;
		transform: translateX(20px);
	}

	.hamburger.expanded .line:nth-child(3) {
		transform: rotate(-45deg);
	}

	/* Mobile navigation styles */
	.nav-links {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100vh;
		background: var(--color-global-bg);
		flex-direction: column;
		justify-content: center;
		align-items: center;
		transform: translateX(-100%);
		transition: transform 0.3s ease-in-out;
		z-index: 5;
	}

	.nav-links.expanded {
		transform: translateX(0);
	}

	.nav-links a {
		margin: 1rem 0;
		font-size: 1.5rem;
	}
}

/* Desktop styles - hide hamburger and show nav normally */
@media (min-width: 641px) {
	.hamburger {
		display: none;
	}
}